 h1 (h1-eth0) 10.10.1.2
 h2 (h2-eth0) 10.10.1.1 (192.168.0.0) (h2-eth1) 10.10.3.2
 h3 (h3-eth0) 10.10.3.1 

STEP 1 (compiling models):
------------------------
java -DRUNTIME_ENV=[c_slave1,d_slave1,eth2,10.10.1.1,eth3,10.10.3.2] -DPORTAL_LINKS=c_slave1:eth2,topnet.net01.net1.r1.portal_10_1_2_0,c_slave1:eth3,topnet.net2.r5.portal_10_1_3_0 -jar ../primogeni/netscript/dist/jprime.jar create Portals5 Portals5.java 192.168.0.0/16

STEP 2 (Creating 2 veth pairs - a total of 4 interfaces) 
sudo ip link add h1-eth0 type veth peer name h2-eth0
sudo ip link add h2-eth1 type veth peer name h3-eth0

(Create 3 namespaces)
sudo ip netns add h1
sudo ip netns add h2
sudo ip netns add h3

(Add the 4 interfaces to their respective namespaced hosts)
sudo ip link set h1-eth0 netns h1
sudo ip link set h2-eth0 netns h2
sudo ip link set h2-eth1 netns h2
sudo ip link set h3-eth0 netns h3

(Configure all IP addresses of the 4 interfaces)
sudo ip netns exec h1 ifconfig h1-eth0 10.10.1.2/24
sudo ip netns exec h2 ifconfig h2-eth0 10.10.1.1/24
sudo ip netns exec h2 ifconfig h2-eth1 10.10.3.2/24
sudo ip netns exec h3 ifconfig h3-eth0 10.10.3.1/24

(Loop back interfaces)
sudo ip netns exec h1 ifconfig lo up
sudo ip netns exec h2 ifconfig lo up
sudo ip netns exec h3 ifconfig lo up

(Check connectivity)
sudo ip netns exec h1 ping -c1 10.10.1.1
sudo ip netns exec h2 ping -c1 10.10.1.2
sudo ip netns exec h2 ping -c1 10.10.3.1
sudo ip netns exec h3 ping -c1 10.10.3.2

STEP3 (SETTING ROUTES - add them line by line):
----------------------
sudo ip netns exec h1 ifconfig h1-eth0 down
sudo ip netns exec h1 ifconfig h1-eth0 up
sudo ip netns exec h1 ip route add 10.10.3.0/24 via 10.10.1.1

sudo ip netns exec h2 ifconfig h2-eth0 down
sudo ip netns exec h2 ifconfig h2-eth0 up
sudo ip netns exec h2 ifconfig h2-eth1 down
sudo ip netns exec h2 ifconfig h2-eth1 up

sudo ip netns exec h3 ifconfig h3-eth0 down
sudo ip netns exec h3 ifconfig h3-eth0 up
sudo ip netns exec h3 ip route add 10.10.1.0/24 via 10.10.3.2

sudo ip netns exec h2 ~/primogeni/netsim/primex -tp 10.10.3.2 166 -tp 10.10.1.1 605 600 Portals5_part_1.tlv

###############################################################################
					ROUTING TABLE AND INTERFACES
###############################################################################
(CHECKING - SKIPPING FOR NOW) 

===========================================
(works only in global - not within containers)

sudo sysctl -w net.core.rmem_default=20097152
sudo sysctl -w net.core.wmem_default=20097152
sudo sysctl -w net.core.rmem_max=40485760
sudo sysctl -w net.core.wmem_max=40485760

sudo ip netns exec h1 ping -c1 10.10.3.1

sudo ip netns exec h3 iperf -s -i 1 -w 32M
sudo ip netns exec h1 iperf -c 10.10.3.1 -w 32M

------------------------------------------------------------
Client connecting to 10.10.3.1, TCP port 5001
TCP window size: 64.0 MByte (WARNING: requested 32.0 MByte)
------------------------------------------------------------
[  5] local 10.10.1.2 port 46272 connected with 10.10.3.1 port 5001
[  6] local 10.10.3.1 port 5001 connected with 10.10.1.2 port 46272
[ ID] Interval       Transfer     Bandwidth
[  6]  0.0- 1.0 sec  35.1 MBytes   294 Mbits/sec
[  6]  1.0- 2.0 sec  38.7 MBytes   325 Mbits/sec
[  6]  2.0- 3.0 sec  39.7 MBytes   333 Mbits/sec
[  6]  3.0- 4.0 sec  38.8 MBytes   326 Mbits/sec
[  6]  4.0- 5.0 sec  38.7 MBytes   324 Mbits/sec
[  6]  5.0- 6.0 sec  38.8 MBytes   326 Mbits/sec
[  6]  6.0- 7.0 sec  40.2 MBytes   337 Mbits/sec
[  6]  7.0- 8.0 sec  39.2 MBytes   328 Mbits/sec
[  6]  8.0- 9.0 sec  38.8 MBytes   326 Mbits/sec
[  6]  9.0-10.0 sec  38.1 MBytes   320 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.3 sec   424 MBytes   347 Mbits/sec
