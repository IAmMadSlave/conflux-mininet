
*********************************************************************TCP

root@pollux:~# sudo ip netns exec h1 iperf -s
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size: 85.3 KByte (default)
------------------------------------------------------------
[  6] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 43710
[ ID] Interval       Transfer     Bandwidth
[  6]  0.0-10.0 sec   870 MBytes   728 Mbits/sec
root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1
------------------------------------------------------------
Client connecting to 10.10.1.1, TCP port 5001
TCP window size: 64.0 KByte (default)
------------------------------------------------------------
[  5] local 10.10.1.2 port 43710 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   870 MBytes   729 Mbits/sec


^Croot@pollux:~# sudo ip netns exec h1 iperf -s -w 16M
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  6] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 43711
[ ID] Interval       Transfer     Bandwidth
[  6]  0.0-10.2 sec   877 MBytes   721 Mbits/sec
root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -w 16M
------------------------------------------------------------
Client connecting to 10.10.1.1, TCP port 5001
TCP window size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  5] local 10.10.1.2 port 43711 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   877 MBytes   733 Mbits/sec


^Croot@pollux:~# sudo ip netns exec h1 iperf -s -w 16M
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  6] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 43712
[ ID] Interval       Transfer     Bandwidth
[  6]  0.0-10.2 sec   879 MBytes   721 Mbits/sec
root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -w 16M
------------------------------------------------------------
Client connecting to 10.10.1.1, TCP port 5001
TCP window size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  5] local 10.10.1.2 port 43712 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.1 sec   879 MBytes   732 Mbits/sec


root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -w 16M
------------------------------------------------------------
Client connecting to 10.10.1.1, TCP port 5001
TCP window size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  7] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 43713
[  7]  0.0-10.0 sec   862 MBytes   721 Mbits/sec
root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1
------------------------------------------------------------
Client connecting to 10.10.1.1, TCP port 5001
TCP window size: 64.0 KByte (default)
------------------------------------------------------------
[  5] local 10.10.1.2 port 43713 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   862 MBytes   722 Mbits/sec
*********************************************************************




*********************************************************************UDP/1G
root@pollux:~# sudo ip netns exec h1 iperf -s -w 16M -u
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 1470 byte datagrams
UDP buffer size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  5] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 32782
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  5]  0.0-10.0 sec   963 MBytes   808 Mbits/sec   0.020 ms    0/687247 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order
root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -u -b 1G
------------------------------------------------------------
Client connecting to 10.10.1.1, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size: 19.2 MByte (default)
------------------------------------------------------------
[  5] local 10.10.1.2 port 32782 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   963 MBytes   808 Mbits/sec
[  5] Sent 687248 datagrams
[  5] Server Report:
[  5]  0.0-10.0 sec   963 MBytes   808 Mbits/sec   0.020 ms    0/687247 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

*********************************************************************


********************************************************************* UDP/2G
Client connecting to 10.10.1.1, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size: 19.2 MByte (default)
------------------------------------------------------------
[  6] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 47393
[  6]  0.0-10.0 sec   964 MBytes   808 Mbits/sec   0.004 ms    0/687668 (0%)
[  6]  0.0-10.0 sec  1 datagrams received out-of-order
root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -u -b 2G
------------------------------------------------------------
Client connecting to 10.10.1.1, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size: 19.2 MByte (default)
------------------------------------------------------------
[  5] local 10.10.1.2 port 47393 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   964 MBytes   809 Mbits/sec
[  5] Sent 687669 datagrams
[  5] Server Report:
[  5]  0.0-10.0 sec   964 MBytes   808 Mbits/sec   0.003 ms    0/687668 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

*********************************************************************


*********************************************************************UDP/2G/1670
root@pollux:~# sudo ip netns exec h1 iperf -s -w 16M -u -l 1470
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 1470 byte datagrams
UDP buffer size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  5] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 42521
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  5]  0.0-10.0 sec   964 MBytes   808 Mbits/sec   0.634 ms    0/687565 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -u -b 2G -l 1470
------------------------------------------------------------
Client connecting to 10.10.1.1, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size: 19.2 MByte (default)
------------------------------------------------------------
[  5] local 10.10.1.2 port 51594 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   964 MBytes   809 Mbits/sec
[  5] Sent 687982 datagrams
[  5] Server Report:
[  5]  0.0-10.0 sec   964 MBytes   808 Mbits/sec   0.006 ms    0/687981 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order
*********************************************************************


*********************************************************************UDP/2G/3000
root@pollux:~# sudo ip netns exec h1 iperf -s -w 16M -u -l 3000
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 3000 byte datagrams
UDP buffer size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  5] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 58011
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  5]  0.0-10.2 sec   900 MBytes   736 Mbits/sec  14.984 ms 373093/687525 (54%)
[  5]  0.0-10.2 sec  1 datagrams received out-of-order

root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -u -b 2G -l 3000
------------------------------------------------------------
Client connecting to 10.10.1.1, UDP port 5001
Sending 3000 byte datagrams
UDP buffer size: 19.2 MByte (default)
------------------------------------------------------------
[  5] local 10.10.1.2 port 58011 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec  1.92 GBytes  1.65 Gbits/sec
[  5] Sent 687534 datagrams
[  5] Server Report:
[  5]  0.0-10.2 sec   900 MBytes   736 Mbits/sec  14.983 ms 373093/687525 (54%)
[  5]  0.0-10.2 sec  1 datagrams received out-of-order
*********************************************************************


*********************************************************************UDP 100M/1470
root@pollux:~# sudo ip netns exec h1 iperf -s -w 16M -u -l 1470
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 1470 byte datagrams
UDP buffer size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  5] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 44052
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  5]  0.0-10.0 sec   120 MBytes   101 Mbits/sec   0.009 ms    0/85470 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -u -b 100M -l 1470
------------------------------------------------------------
Client connecting to 10.10.1.1, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size: 19.2 MByte (default)
------------------------------------------------------------
[  5] local 10.10.1.2 port 44052 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   120 MBytes   101 Mbits/sec
[  5] Sent 85471 datagrams
[  5] Server Report:
[  5]  0.0-10.0 sec   120 MBytes   101 Mbits/sec   0.008 ms    0/85470 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

*********************************************************************


*********************************************************************
root@pollux:~# sudo ip netns exec h1 iperf -s -w 16M -u -l 1470
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 1470 byte datagrams
UDP buffer size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  5] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 50507
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  5]  0.0-10.0 sec   608 MBytes   510 Mbits/sec   0.022 ms    0/434050 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -u -b 500M -l 1470
------------------------------------------------------------
Client connecting to 10.10.1.1, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size: 19.2 MByte (default)
------------------------------------------------------------
[  5] local 10.10.1.2 port 50507 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   608 MBytes   510 Mbits/sec
[  5] Sent 434051 datagrams
[  5] Server Report:
[  5]  0.0-10.0 sec   608 MBytes   510 Mbits/sec   0.022 ms    0/434050 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

*********************************************************************


*********************************************************************
root@pollux:~# sudo ip netns exec h1 iperf -s -w 16M -u -l 6000
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 6000 byte datagrams
UDP buffer size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  5] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 53356
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  5]  0.0-10.0 sec   602 MBytes   505 Mbits/sec   0.064 ms    0/105263 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -u -b 500M -l 6000
------------------------------------------------------------
Client connecting to 10.10.1.1, UDP port 5001
Sending 6000 byte datagrams
UDP buffer size: 19.2 MByte (default)
------------------------------------------------------------
[  5] local 10.10.1.2 port 53356 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   602 MBytes   505 Mbits/sec
[  5] Sent 105264 datagrams
[  5] Server Report:
[  5]  0.0-10.0 sec   602 MBytes   505 Mbits/sec   0.063 ms    0/105263 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

*********************************************************************


*********************************************************************UDP/1G/3000
root@pollux:~# sudo ip netns exec h1 iperf -s -w 16M -u -l 3000
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 3000 byte datagrams
UDP buffer size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  5] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 37013
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  5]  0.0-10.0 sec   890 MBytes   746 Mbits/sec   0.038 ms 121050/432125 (28%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -u -b 1G -l 3000
------------------------------------------------------------
Client connecting to 10.10.1.1, UDP port 5001
Sending 3000 byte datagrams
UDP buffer size: 19.2 MByte (default)
------------------------------------------------------------
[  5] local 10.10.1.2 port 37013 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec  1.21 GBytes  1.04 Gbits/sec
[  5] Sent 432126 datagrams
[  5] Server Report:
[  5]  0.0-10.0 sec   890 MBytes   746 Mbits/sec   0.038 ms 121050/432125 (28%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order
*********************************************************************


*********************************************************************
root@pollux:~# sudo ip netns exec h1 iperf -s -w 16M -u -l 1000
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 1000 byte datagrams
UDP buffer size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  5] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 37534
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  5]  0.0-10.0 sec   656 MBytes   550 Mbits/sec   0.563 ms    0/687555 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -u -b 1G -l 1000
------------------------------------------------------------
Client connecting to 10.10.1.1, UDP port 5001
Sending 1000 byte datagrams
UDP buffer size: 19.2 MByte (default)
------------------------------------------------------------
[  5] local 10.10.1.2 port 37534 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   656 MBytes   550 Mbits/sec
[  5] Sent 687556 datagrams
[  5] Server Report:
[  5]  0.0-10.0 sec   656 MBytes   550 Mbits/sec   0.562 ms    0/687555 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

*********************************************************************


*********************************************************************
root@pollux:~# sudo ip netns exec h1 iperf -s -w 16M -u -l 500
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 500 byte datagrams
UDP buffer size: 32.0 MByte (WARNING: requested 16.0 MByte)
------------------------------------------------------------
[  5] local 10.10.1.1 port 5001 connected with 10.10.1.2 port 39456
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  5]  0.0-10.0 sec   328 MBytes   275 Mbits/sec   0.005 ms    0/687296 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

root@castor:~# sudo ip netns exec h2 iperf -c 10.10.1.1 -u -b 1G -l 500
------------------------------------------------------------
Client connecting to 10.10.1.1, UDP port 5001
Sending 500 byte datagrams
UDP buffer size: 19.2 MByte (default)
------------------------------------------------------------
[  5] local 10.10.1.2 port 39456 connected with 10.10.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   328 MBytes   275 Mbits/sec
[  5] Sent 687297 datagrams
[  5] Server Report:
[  5]  0.0-10.0 sec   328 MBytes   275 Mbits/sec   0.004 ms    0/687296 (0%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order

*********************************************************************


*********************************************************************
If you go beyond the number of events that can be processed by this physical interface/machine, you start liosing packets.
*********************************************************************


*********************************************************************
*********************************************************************


*********************************************************************
*********************************************************************


