#Pollux(1):







sudo ip netns del h1 
sudo ip link add h1-eth0 type veth peer name eth1
sleep 1
sudo ip netns add h1
sudo ip link set h1-eth0 netns h1
sudo ip netns exec h1 ifconfig h1-eth0 10.10.1.2/24
#sudo stop network-manager
sudo ifconfig eth1 10.10.1.1/24
#(Anothern portal interface would be real interface. 10.1.0.13  : Set the PortalsVega.java like that)
sudo ip netns exec h1 ifconfig lo up
sudo ip netns exec h1 ping -c1 10.10.1.1
sudo ping -c1 10.10.1.2

#STEP2 (SETTING ROUTES):
#----------------------
#sudo ip netns exec h1 ifconfig h1-eth1 down
#sudo ip netns exec h1 ifconfig h1-eth1 up
sudo ip netns exec h1 ip route add 192.168.0.0/16 via 10.10.1.1
sudo ip netns exec h1 ip route add 192.170.0.0/16 via 10.10.1.1
sudo ip netns exec h1 ip route add 10.10.2.0/24 via 10.10.1.1
#sudo ifconfig eth2 down
#sudo ifconfig eth2 up

#Compile
#----------
java -DRUNTIME_ENV=[c_slave1,d_slave1,eth2,10.10.1.1,eth3,10.1.0.28] -DPORTAL_LINKS=c_slave1:eth2,topnet.portal_router.portal_if_10_10_1_0,c_slave1:eth3,topnet.center_router.portal_if_10_1_0_0 -jar ../primogeni/netscript/dist/jprime.jar create SolvingPortalTCP1 SolvingPortalTCP1.java 192.168.0.0/16

#Run:
#sudo ip netns exec h2 ~/primogeni/netsim/primex  -tp 10.10.3.2 81 -tp 10.10.1.1 109 1800 SolvingPortalTCP1000Mb75000pkt_part_1.tlv
#cd ~/expt
../primogeni/netsim/primex  -tp 10.1.0.28 81 -tp 10.10.1.1 109 1800 SolvingPortalTCP1_part_1.tlv

#Fix Route:
ip route del 10.10.2.0/24
ip route add 10.10.2.0/24 via 10.1.0.29


#test
sudo ip netns exec h1 ping 10.10.2.2




#****************************************************************************************
#Castor(2)
sudo ip netns del h1 
sudo ip link add h1-eth0 type veth peer name eth1
sleep 1
sudo ip netns add h1
sudo ip link set h1-eth0 netns h1
sudo ip netns exec h1 ifconfig h1-eth0 10.10.2.2/24
#sudo stop network-manager
sudo ifconfig eth1 10.10.2.1/24
#(Anothern portal interface would be real interface. 10.1.0.13  : Set the PortalsVega.java like that)
sudo ip netns exec h1 ifconfig lo up
sudo ip netns exec h1 ifconfig h1-eth0 down
sudo ip netns exec h1 ifconfig h1-eth0 up
sudo ip netns exec h1 ping -c1 10.10.2.1
sudo ping -c1 10.10.2.2

#STEP2 (SETTING ROUTES):
#----------------------
#sudo ip netns exec h1 ifconfig h1-eth0 down
#sudo ip netns exec h1 ifconfig h1-eth0 up
sudo ip netns exec h1 ip route add 192.168.0.0/16 via 10.10.2.1
sudo ip netns exec h1 ip route add 192.170.0.0/16 via 10.10.2.1
sudo ip netns exec h1 ip route add 10.10.2.0/24 via 10.10.2.1
sudo ip netns exec h1 ip route add 10.10.1.0/24 via 10.10.2.1
#sudo ifconfig eth2 down
#sudo ifconfig eth2 up

#Compile
java -DRUNTIME_ENV=[c_slave1,d_slave1,eth2,10.10.2.1,eth3,10.1.0.29] -DPORTAL_LINKS=c_slave1:eth2,topnet.portal_router.portal_if_10_10_2_0,c_slave1:eth3,topnet.center_router.portal_if_10_1_0_0 -jar ../primogeni/netscript/dist/jprime.jar create SolvingPortalTCP2 SolvingPortalTCP2.java 192.170.0.0/16

#Run
../primogeni/netsim/primex  -tp 10.1.0.29 81 -tp 10.10.2.1 109 1800 SolvingPortalTCP2_part_1.tlv
#Fix Route
ip route del 10.10.1.0/24
ip route add 10.10.1.0/24 via 10.1.0.28

#test
sudo ip netns exec h1 ping 10.10.2.2





#Iperf Test
#On Pollux: 
sudo ip netns exec h1 iperf -s -i 1
#On Castor: 
sudo ip netns exec h1  iperf -c 10.10.1.2



